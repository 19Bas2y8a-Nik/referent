# План тестирования функциональности

## Обзор
Этот документ описывает план тестирования всех функций приложения "Референт".

---

## 1. Тестирование парсинга статей

### 1.1 Тестовые случаи

#### TC-PARSE-001: Парсинг стандартной статьи
**Описание**: Парсинг статьи с типичной HTML структурой

**Шаги**:
1. Открыть приложение
2. Ввести URL англоязычной статьи (например, с Medium, TechCrunch, etc.)
3. Нажать любую кнопку действия

**Ожидаемый результат**:
- Статья успешно распарсена
- Извлечен заголовок
- Извлечен основной контент
- Дата извлечена (если доступна)

**Проверка**:
- `title` не равен "Не найдено"
- `content` не равен "Не найдено" и имеет длину > 100 символов
- `date` может быть "Не найдено" (не критично)

#### TC-PARSE-002: Парсинг статьи с различными структурами HTML
**Описание**: Проверка работы с разными селекторами

**Тестовые URL**:
- Статьи с тегом `<article>`
- Статьи с классом `.content`
- Статьи с классом `.post-content`
- Статьи с тегом `<main>`

**Ожидаемый результат**: Все варианты должны успешно парситься

#### TC-PARSE-003: Парсинг статьи без контента
**Описание**: Обработка случая, когда контент не найден

**Ожидаемый результат**:
- API возвращает `content: "Не найдено"`
- Фронтенд показывает ошибку: "Не удалось извлечь содержимое статьи"

---

## 2. Тестирование кнопки "О чем статья?"

### 2.1 Проверка промпта

**Ожидаемый System Prompt**:
```
"Ты помощник, который кратко объясняет содержание статей. Отвечай на русском языке в дружелюбном тоне."
```

**Ожидаемый User Prompt**:
```
О чем эта статья?

Заголовок: [title]

Содержание:
[content]

Дай краткое объяснение (2-3 предложения) о чем эта статья.
```

**Проверка**: Промпты соответствуют ожидаемым (проверено в коде ✅)

### 2.2 Проверка формата ответа

**Ожидаемый формат**:
- 2-3 предложения
- Краткое объяснение содержания статьи
- На русском языке

**Тестовый случай**:
1. Ввести URL статьи
2. Нажать "О чем статья?"
3. Дождаться результата

**Проверка**:
- ✅ Ответ содержит 2-3 предложения (примерно 50-200 символов)
- ✅ Ответ на русском языке
- ✅ Ответ объясняет содержание статьи

### 2.3 Проверка языка ответа

**Ожидаемый результат**: Весь ответ на русском языке

**Проверка**: 
- Нет английских слов (кроме технических терминов, которые могут быть в оригинале)
- Грамматика русского языка

---

## 3. Тестирование кнопки "Тезисы"

### 3.1 Проверка промпта

**Ожидаемый System Prompt**:
```
"Ты помощник, который создает тезисы из статей. Отвечай на русском языке. Форматируй тезисы в виде списка с четкими пунктами."
```

**Ожидаемый User Prompt**:
```
Создай тезисы на основе этой статьи:

Заголовок: [title]

Содержание:
[content]

Создай список основных тезисов (5-7 пунктов).
```

**Проверка**: Промпты соответствуют ожидаемым (проверено в коде ✅)

### 3.2 Проверка формата ответа

**Ожидаемый формат**:
- Список из 5-7 пунктов
- Четкие пункты
- На русском языке

**Тестовый случай**:
1. Ввести URL статьи
2. Нажать "Тезисы"
3. Дождаться результата

**Проверка**:
- ✅ Ответ содержит список (маркированный или нумерованный)
- ✅ Количество пунктов: 5-7
- ✅ Каждый пункт четко сформулирован
- ✅ Ответ на русском языке

### 3.3 Проверка языка ответа

**Ожидаемый результат**: Весь ответ на русском языке

---

## 4. Тестирование кнопки "Пост для Telegram"

### 4.1 Проверка промпта

**Ожидаемый System Prompt**:
```
"Ты помощник, который создает посты для Telegram на основе статей. Отвечай на русском языке. Используй эмодзи, короткие абзацы и привлекательный стиль для социальных сетей."
```

**Ожидаемый User Prompt**:
```
Создай пост для Telegram на основе этой статьи:

Заголовок: [title]

Содержание:
[content]

Создай интересный пост для Telegram с эмодзи, который кратко рассказывает о статье и привлекает внимание.
```

**Проверка**: Промпты соответствуют ожидаемым (проверено в коде ✅)

### 4.2 Проверка наличия эмодзи

**Ожидаемый результат**: Пост содержит эмодзи

**Проверка**:
- ✅ В ответе присутствуют эмодзи (минимум 1-2)
- ✅ Эмодзи уместны и соответствуют содержанию

### 4.3 Проверка стиля

**Ожидаемый стиль**:
- Короткие абзацы
- Привлекательный формат для соцсетей
- Легко читается

**Проверка**:
- ✅ Текст разбит на короткие абзацы (не сплошной текст)
- ✅ Стиль привлекательный и подходит для Telegram
- ✅ Пост кратко рассказывает о статье

### 4.4 Проверка языка ответа

**Ожидаемый результат**: Весь ответ на русском языке

---

## 5. Тестирование обработки ошибок

### 5.1 Неверный URL

**Тестовый случай**:
1. Ввести неверный URL (например, "not-a-url")
2. Нажать любую кнопку

**Ожидаемый результат**:
- API `/api/parse` возвращает ошибку 400
- Сообщение: "Invalid URL format" или похожее
- Фронтенд отображает ошибку пользователю

**Проверка кода**:
- ✅ Валидация URL в `app/api/parse/route.ts` (строки 24-32)
- ✅ Обработка ошибок в `app/page.tsx` (строки 24-27, 68-70)

### 5.2 Статья без контента

**Тестовый случай**:
1. Ввести URL статьи, которую не удается распарсить
2. Нажать любую кнопку

**Ожидаемый результат**:
- API возвращает `content: "Не найдено"`
- Фронтенд показывает: "Не удалось извлечь содержимое статьи. Попробуйте другую ссылку."

**Проверка кода**:
- ✅ Проверка в `app/page.tsx` (строки 37-39)

### 5.3 Ошибки API (OpenRouter)

**Тестовые случаи**:

#### TC-ERROR-001: Отсутствие API ключа
**Ожидаемый результат**:
- API возвращает ошибку 500
- Сообщение: "OPENROUTER_API_KEY is not configured. Please check your .env.local file."

**Проверка кода**:
- ✅ Проверка в `app/api/generate/route.ts` (строки 25-32)

#### TC-ERROR-002: Неверный API ключ
**Ожидаемый результат**:
- OpenRouter API возвращает ошибку авторизации
- Сообщение об ошибке передается пользователю

**Проверка кода**:
- ✅ Обработка в `app/api/generate/route.ts` (строки 109-128)
- ✅ Обработка в `app/page.tsx` (строки 54-57, 68-70)

#### TC-ERROR-003: Недоступность OpenRouter API
**Ожидаемый результат**:
- Ошибка сети обрабатывается
- Понятное сообщение пользователю

**Проверка кода**:
- ✅ Общий catch блок в `app/api/generate/route.ts` (строки 145-164)

### 5.4 Неверный action

**Тестовый случай**:
1. Отправить запрос с неверным `action` (например, "invalid")

**Ожидаемый результат**:
- API возвращает ошибку 400
- Сообщение: "Invalid action. Use 'about', 'thesis', 'telegram', or 'translate'"

**Проверка кода**:
- ✅ Валидация в `app/api/generate/route.ts` (строки 73-77)

---

## 6. Дополнительные тесты

### 6.1 Тестирование UI/UX

#### TC-UI-001: Состояние загрузки
**Проверка**:
- ✅ Кнопки отключаются во время загрузки
- ✅ Отображается индикатор "Генерация..."
- ✅ Блок результата показывает состояние загрузки

#### TC-UI-002: Отключение кнопок при отсутствии URL
**Проверка**:
- ✅ Кнопки отключены, когда поле URL пустое
- ✅ Кнопки активны, когда URL введен

#### TC-UI-003: Отображение результата
**Проверка**:
- ✅ Результат отображается в блоке результатов
- ✅ Форматирование сохраняется (whitespace-pre-wrap)
- ✅ Плейсхолдер отображается при отсутствии результата

### 6.2 Тестирование адаптивности

**Проверка**:
- ✅ Layout адаптируется для мобильных устройств
- ✅ Кнопки располагаются вертикально на мобильных
- ✅ Кнопки располагаются горизонтально на десктопе

### 6.3 Тестирование темной темы

**Проверка**:
- ✅ Все элементы поддерживают темную тему
- ✅ Контрастность достаточна для чтения
- ✅ Цвета корректны в обеих темах

---

## 7. Чек-лист тестирования

### Функциональность
- [ ] Парсинг различных англоязычных статей
- [ ] Кнопка "О чем статья?" работает корректно
- [ ] Кнопка "Тезисы" работает корректно
- [ ] Кнопка "Пост для Telegram" работает корректно
- [ ] Обработка неверного URL
- [ ] Обработка статьи без контента
- [ ] Обработка ошибок API

### Формат ответов
- [ ] "О чем статья?" - 2-3 предложения
- [ ] "Тезисы" - список из 5-7 пунктов
- [ ] "Пост для Telegram" - содержит эмодзи
- [ ] "Пост для Telegram" - короткие абзацы

### Язык ответов
- [ ] Все ответы на русском языке
- [ ] Нет английского текста (кроме терминов)

### UI/UX
- [ ] Состояние загрузки работает
- [ ] Кнопки отключаются корректно
- [ ] Результаты отображаются правильно
- [ ] Адаптивность работает
- [ ] Темная тема работает

---

## 8. Рекомендации по тестированию

### Тестовые URL для проверки

**Рекомендуемые статьи для тестирования**:
1. Medium статьи (https://medium.com/...)
2. TechCrunch статьи (https://techcrunch.com/...)
3. Dev.to статьи (https://dev.to/...)
4. Статьи с различных платформ

### Порядок тестирования

1. **Базовое тестирование**:
   - Проверить парсинг одной статьи
   - Протестировать все три кнопки
   - Проверить формат и язык ответов

2. **Тестирование ошибок**:
   - Неверный URL
   - Статья без контента
   - Отсутствие API ключа

3. **UI/UX тестирование**:
   - Состояния загрузки
   - Адаптивность
   - Темная тема

4. **Интеграционное тестирование**:
   - Полный flow от ввода URL до получения результата
   - Множественные запросы подряд

---

## Примечания

- Для реального тестирования требуется настроенный `OPENROUTER_API_KEY`
- Некоторые тесты требуют реальных API вызовов
- Рекомендуется тестировать на различных типах статей
- Важно проверить работу на разных устройствах и браузерах

